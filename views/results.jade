extends layout

block extraHeader
	link(href='/stylesheets/results.css', rel='stylesheet')

block content
		script.
			var bodyEl = document.getElementsByTagName('body');
			var user = !{JSON.stringify(user)};
			if(user){
				bodyEl[0].className = bodyEl[0].className.split('nojs').join(' jsEnabled ');
			}
		include ./navbar.jade
		include ./advanced-search.jade
		section#about.container.content-section.text-center
				.row
					.cd-user-modal
						.cd-user-modal-container
							ul.cd-switcher
								li
									a(href='#0') Log in
								li
									a(href='#0') New account
							#cd-signup
								form(id='signup-form',class = 'cd-form',action = '/signup',method = "post",name = "signup_form")
									p#email-username.fieldset
										label.image-replace.cd-username(for='signup-username')
										input#signup-username.full-width.has-padding.has-border(type='text', placeholder='Full Name', name='username')
										span#username-error.cd-error-message
									p#email-signup.fieldset
										label.image-replace.cd-email(for='signup-email') Email
										input#signup-email.full-width.has-padding.has-border(type='email', placeholder='Email Address', name='useremail')
										span#email-error.cd-error-message
									p#email-signup-password.fieldset
										label.image-replace.cd-password(for='signup-password') Password
										input#signup-password.full-width.has-padding.has-border(type='text', placeholder='Password', name='userpassword')
										a.hide-password(href='#0') Hide
										span#password-error.cd-error-message Error message here!
									p#fb-social.signup-social-btn
										a.btn.btn-block.btn-social.btn-lg.btn-facebook(href = "/auth/facebook")
											span.fa.fa-facebook
											| Log in with Facebook
									p#google-social.signup-social-btn
										a.btn.btn-block.btn-social.btn-lg.btn-google(href = "/auth/google")
											span.fa.fa-google
											| Log in with Google
									p#linkedin-social.signup-social-btn
										a.btn.btn-block.btn-social.btn-lg.btn-linkedin(href = "/auth/google")
											span.fa.fa-linkedin
											| Log in with Linkedin
									//
										p#email-signup-option
											a(href='#0') Continue with email.
											span By signing up you indicate that you have read and agree to the Terms of Service and Privacy Policy.
									p#fund-option
										input#fund-signup(type='checkbox', name='fundOption', form="signup-form")
										label(for='fund-signup') Sign up as an funding institution
									p#signup-terms.fieldset
										input#accept-terms(type='checkbox')
										label(for='accept-terms' id = "terms")
											| I agree to the
											a(href='#0') Terms
											span#terms-error  Please agree to the terms and conditions
									p#signup-btn.fieldset
										button.full-width.has-padding(type='submit', id = "signup-button") Create account

							#cd-login
								// log in form
								form.cd-form(id = 'login-form', action = "/login", method = "post", name = "login_form")
									p#email-login.fieldset
										label.image-replace.cd-email(for='signin-email') E-mail
										input#signin-email.full-width.has-padding.has-border(type='email', placeholder='E-mail', name = 'useremail')
										span#login-email-error.cd-error-message Error message here!
									p#email-login-password.fieldset
										label.image-replace.cd-password(for='signin-password') Password
										input#signin-password.full-width.has-padding.has-border(type='text', placeholder='Password', name = 'password')
										a.hide-password(href='#0') Hide
										span#signin-password-error.cd-error-message Error message here!
									p#fb-social.login-social-btn
										a.btn.btn-block.btn-social.btn-lg.btn-facebook(href = "/auth/facebook")
											span.fa.fa-facebook
											| Log in with Facebook
									p#google-social.login-social-btn
										a.btn.btn-block.btn-social.btn-lg.btn-google(href = "/auth/google")
											span.fa.fa-google
											| Log in with Google
									p#linkedin-social.login-social-btn
										a.btn.btn-block.btn-social.btn-lg.btn-linkedin(href = "/auth/linkedin")
											span.fa.fa-linkedin
											| Log in with Linkedin
									p#remember.fieldset
										input#remember-me(type='checkbox', checked='')
										label(for='remember-me') Remember me
									p#email-login-btn.fieldset
										button#login-button.full-width.has-padding(type='submit') Login
									//
										p#email-option
											a(href="#0") Continue with email
								p.cd-form-bottom-message
									a(href="#0") Forgot your password?
							#cd-reset-password
								// reset password form
								p.cd-form-message
									| Lost your password? Please enter your email address. You will receive a link to create a new password.
								form.cd-form
									p#resend-email.fieldset
										label.image-replace.cd-email(for='reset-email') E-mail
										input#reset-email.full-width.has-padding.has-border(type='email', placeholder='E-mail')
										span.cd-error-message Error message here!
									p#reset-password.fieldset
										button#reset-password.full-width.has-padding(type='submit') Reset password
								p.cd-form-bottom-message
									a(href='#0') Back to log-in
							// cd-reset-password
							a.cd-close-form(href='#0') Close
								//
							// cd-login
					.col-lg-8.col-lg-offset-2
						#countriesModal.modal.fade(role='dialog')
							.modal-dialog
								// Modal content
								.modal-content
									.modal-header
										button.close(type='button', data-dismiss='modal') Ã—
										h4.modal-title Applicable countries
									.modal-body
										p#countriesModalText
									.modal-footer
										button.btn.btn-default(type='button', data-dismiss='modal') Close
						div.results
							h3
								span
							button#show-all.btn.btn-primary(type='button') Only show funds who have not passed their deadlines
						.contact-div
							p#contact-us Our search engine didn't return any funds for you! Email 
								a(href='mailto:howard@silofunds.com') Us
								| and we'll personally find a funding opportunity that suits you.
						div.page-header
							script#fund-template(type='text/template')
								.lazyload									
									//
										<ul class="database">
											<div class="fund_list">
												<li><a id="profile_link<%= id %>">
														<h3 class="fund_title"><%= title %></h3></a>
													<h4 id="deadline-passed" class="deadline-passed<%= id %>">Oops the deadline has passed for this fund...</h4>
												</li>
												<li class="fund_info">
													<p class="fund_tags<%= id %>">Tags:</p>
													<p class="fund_min_amount<%= id %>"><span class="control"></span></p>
													<p class="fund_max_amount<%= id %>"><span class="control"><%= maximum_amount %></span></p>
													<p class="fund_min_age<%= id %>"><span class="control"><%= minimum_age %></span></p>
													<p class="fund_max_age<%= id %>"><span class="control"><%= maximum_age %></span></p>
													<p class="nationalities<%= id %>"></p>
													<p class="deadline<%= id %>">Deadline:<span class="control badge badge-deadline"><%= deadline.split('T')[0].split('-').reverse().join('/') %></span></p>
												</li>
												<label id="<%= id %>">Additional Information:
													<div class="description_control"></div>
												</label>
												<h4 class="fund_link"><a href="<%=application_link %>" target="_blank">Apply Now</a></h4>
											</div>
										</ul>

block scripts
	// signup functions
	script(src='javascript/signup-login.js')
	//advanced search
	script(src='javascript/advanced-search.js')
	//search functions
	script(src='javascript/results.js')
	//Modernizr
	script(src='javascript/lib/modernizr-custom.js')
	//lazyload
	script(src='javascript/jquery.lazyload-any.js')
	//readmore
	script.
		var fundData =!{JSON.stringify(funds)};
		var user = !{JSON.stringify(user)};
		var resultsPage = !{JSON.stringify(resultsPage)};

		var query = !{JSON.stringify(query)};
		// Google Analytics
	script.
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-74497958-1', 'auto');
		ga('send', 'pageview');
